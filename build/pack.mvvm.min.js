import { minify } from 'uglify-js';
import buble from 'rollup-plugin-buble';
import uglify from 'rollup-plugin-uglify';
import { mvvmBanner } from './pack.banner';

const outputConfig = {
	comments: function(node, comment) {
		// multiline comment
		return comment.type === "comment2" && /TANG/i.test(comment.value);
	}
}

export default {
	'entry': './src/mvvm/index.js',
	'dest': './dist/mvvm.min.js',
	'format': 'umd',
	'moduleName': 'MVVM',
	'banner': mvvmBanner,
	'plugins': [
		buble(),
		uglify({
			'output': outputConfig
		}, minify)
	]
}