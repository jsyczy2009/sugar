/*!
 * mvvm.js
 * mvvm library for sugar
 * (c) 2016 TANG
 * this library can be used independently (without sugar)
 * https://github.com/tangbc/sugar
 * released under the MIT license.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MVVM=e():t.MVVM=e()}(this,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){var s,n;s=[i(1),i(2)],n=function(t,e){function i(i,s,n){this.context=n,t.each(s,function(e,i){t.isFunc(e)&&(s[i]=e.bind(n))}),this.backup=t.copy(s),this.vm=new e(i,s),this.$=this.vm.$data}var s=i.prototype;return s.get=function(e){return t.isString(e)?this.$[e]:this.$},s.set=function(e,i){var s=this.$;t.isObject(e)?t.each(e,function(t,e){s[e]=t}):t.isString(e)&&(s[e]=i)},s.reset=function(e){var i=this.$,s=this.backup;t.isString(e)?i[e]=s[e]:t.isArray(e)?t.each(e,function(t,e){i[e]=s[e]}):t.each(i,function(t,e){i[e]=s[e]})},s.watch=function(t,e){this.vm.watcher.add({dep:[t],acc:[void 0]},function(t,i,s){e.call(this,t,i,s)},this.context)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s;s=function(){function t(t){return"[object Object]"===l.toString.call(t)}function e(t){return"[object Array]"===l.toString.call(t)}function i(t){return t instanceof Function}function s(t){return"string"==typeof t}function n(t){return"boolean"==typeof t}function a(t){return"number"==typeof t&&!isNaN(t)}function r(e){return e&&t(e)&&!e.nodeType&&e!==e.window?!e.constructor||p.call(e.constructor.prototype,"isPrototypeOf"):!1}function c(){this.OP=l,this.AP=u,this.WIN=o,this.DOC=h,this.isFunc=i,this.isArray=e,this.isNumber=a,this.isObject=t,this.isString=s,this.isBoolean=n}var o=window,h=o.document,l=Object.prototype,u=Array.prototype,p=l.hasOwnProperty,d=c.prototype,f=o.console;return d.log=function(){f.log.apply(f,arguments)},d.error=function(){f.error.apply(f,arguments)},d.warn=function(){f.warn.apply(f,arguments)},d.hasOwn=function(t,e){return t&&p.call(t,e)},d.def=function(t,e,i,s,n,a){return Object.defineProperty(t,e,{value:i,writable:!!s,enumerable:!!n,configurable:!!a})},d.each=function(i,n,a){var r,c;if(i)if(a||(a=o),s(n)&&(n=a[n]),e(i))for(c=0;c<i.length&&(r=n.call(a,i[c],c),r!==!1);c++)null===r&&(i.splice(c,1),c--);else if(t(i))for(c in i)if(this.hasOwn(i,c)){if(r=n.call(a,i[c],c),r===!1)break;null===r&&delete i[c]}},d.extendObject=function(){var t,s,a,c,o,h,l=arguments[0]||{},u=1,p=arguments.length,d=!1;for(n(l)&&(d=l,l=arguments[u]||{},u++),"object"==typeof l||i(l)||(l={}),u===p&&(l=this,u--);p>u;u++)if(null!=(t=arguments[u]))for(s in t)a=l[s],c=t[s],l!==c&&(d&&c&&(r(c)||(o=e(c)))?(o?(o=!1,h=a&&e(a)?a:[]):h=a&&r(a)?a:{},l[s]=this.extendObject(d,h,c)):void 0!==c&&(l[s]=c));return l},d.extend=function(){var t=u.slice.call(arguments);return t.unshift({}),this.extendObject.apply(this,t)},d.copy=function(i){var s;return s=e(i)?i.slice(0):t(i)?this.extendObject(!0,{},i):i},d.removeSpace=function(t){return t.replace(/\s/g,"")},d.getKeyValue=function(t,e){var i=t.split(":");return e?i:i.pop()},d.stringToParams=function(t){var e,i,s,n=this.removeSpace(t),a=n.match(/(\(.*\))/),r=a&&a[0];return r?(i=r.substr(1,r.length-2).split(","),s=n.substr(0,n.indexOf(r)),e=[s,i]):e=[n,i],e},d.convertJson=function(t){var e,i,s=t.trim(),n=s.length;return/^\{.*\}$/.test(s)&&(e={},s=s.substr(1,n-2).replace(/\s|'|"/g,""),i=s.match(/[^,]+:[^:]+((?=,[\w_-]+:)|$)/g),this.each(i,function(t){var i=this.getKeyValue(t,!0),s=i[0],n=i[1];s&&n&&(e[s]=n)},this)),e},d.createElement=function(t){return h.createElement(t)},d.createFragment=function(){return h.createDocumentFragment()},d.nodeToFragment=function(t){for(var e,i=this.createFragment(),s=t.cloneNode(!0);e=s.firstChild;)i.appendChild(e);return i},d.stringToFragment=function(t){var e,i;return/<[^>]+>/g.test(t)?(e=this.createElement("div"),e.innerHTML=t,i=this.nodeToFragment(e)):(i=this.createFragment(),i.appendChild(h.createTextNode(t))),i},d.getExpAlias=function(t){var e=t.indexOf(".");return-1===e?t:t.substr(0,e)},d.getExpKey=function(t){var e=t.lastIndexOf(".");return-1===e?"":t.substr(e+1)},new c}.call(e,i,e,t),!(void 0!==s&&(t.exports=s))},function(t,e,i){var s,n;s=[i(5),i(1),i(6),i(7),i(9),i(10),i(11),i(3),i(12),i(13),i(14),i(15),i(16)],n=function(t,e,i,s,n,a,r,c,o,h,l,u,p){function d(t,d){return this.isElementNode(t)?e.isObject(d)?(this.$element=t,this.$fragment=e.nodeToFragment(this.$element),this.$data=d,this.$data.$els={},this.$unCompileNodes=[],this.$rootComplied=!1,this.updater=new i(this),this.watcher=new s(this.$data),this.von=new n(this),this.vel=new a(this),this.vif=new r(this),this.vfor=new c(this),this.vtext=new o(this),this.vhtml=new h(this),this.vshow=new l(this),this.vbind=new u(this),this.vmodel=new p(this),this.$inputs="input|select|textarea".split("|"),void this.init()):void e.error("model must be a type of Object: ",d):void e.error("element must be a type of DOMElement: ",t)}var f=d.prototype;return f.init=function(){this.complieElement(this.$fragment,!0)},f.complieElement=function(t,e,i){var s,n=t.childNodes;e&&this.hasDirective(t)&&this.$unCompileNodes.push([t,i]);for(var a=0;a<n.length;a++)s=n[a],this.hasDirective(s)&&this.$unCompileNodes.push([s,i]),s.childNodes.length&&!this.isLateCompile(s)&&this.complieElement(s,!1,i);e&&this.compileAll()},f.hasDirective=function(t){var e,i,s=t.textContent,n=/(\{\{.*\}\})|(\{\{\{.*\}\}\})/;if(this.isElementNode(t)){i=t.attributes;for(var a=0;a<i.length;a++)if(this.isDirective(i[a].name)){e=!0;break}}else this.isTextNode(t)&&n.test(s)&&(e=!0);return e},f.compileAll=function(){e.each(this.$unCompileNodes,function(t){return this.complieDirectives(t),null},this),this.checkCompleted()},f.complieDirectives=function(t){var i,s,n,a,r=t[0],c=t[1],o=[];if(this.isElementNode(r)){a=r.attributes;for(var h=0;h<a.length;h++)i=a[h],s=i.name,this.isDirective(s)&&("v-for"===s&&(n=i),o.push(i));n&&(e.def(r,"_vfor_directives",o.length),o=[n],n=null),e.each(o,function(t){this.compile(r,t,c)},this)}else this.isTextNode(r)&&this.compileText(r,c)},f.compile=function(i,s,n){var a=s.name,r=s.value,c=[n,i,r,a];if(t.removeAttr(i,a),!r&&"v-else"!==a)return void e.warn("The directive value of "+a+" is empty!");if(0===a.indexOf("v-bind"))this.vbind.parse.apply(this.vbind,c);else if(0===a.indexOf("v-on"))this.von.parse.apply(this.von,c);else switch(a){case"v-el":this.vel.parse.apply(this.vel,c);break;case"v-text":this.vtext.parse.apply(this.vtext,c);break;case"v-html":this.vhtml.parse.apply(this.vhtml,c);break;case"v-show":this.vshow.parse.apply(this.vshow,c);break;case"v-if":this.vif.parse.apply(this.vif,c);break;case"v-else":e.def(i,"_directive","v-else");break;case"v-model":this.vmodel.parse.apply(this.vmodel,c);break;case"v-for":this.vfor.parse.apply(this.vfor,c);break;default:e.warn(a+" is an unknown directive!")}},f.compileText=function(t,i){var s,n,a,r,c,o,h=t.textContent,l=new RegExp("{{(.+?)}}","g"),u=new RegExp("{{{(.+?)}}}","g"),p=h.match(u);if(p?(s=p[0],o=!0,c=s.replace(/\s\{|\{|\{|\}|\}|\}/g,"")):(p=h.match(l),s=p[0],c=s.replace(/\s|\{|\{|\}|\}/g,"")),n=h.split(s),a=n[0],r=n[n.length-1],o){if(a||r)return void e.warn("{{{html}}} can not have a prefix or suffix textNode!");this.vhtml.parse.call(this.vhtml,i,t,c)}else t._vm_text_prefix=a,t._vm_text_suffix=r,this.vtext.parse.call(this.vtext,i,t,c)},f.blockCompile=function(t){e.each(this.$unCompileNodes,function(e){return t===e[0]?null:void 0})},f.isElementNode=function(t){return 1===t.nodeType},f.isTextNode=function(t){return 3===t.nodeType},f.isDirective=function(t){return 0===t.indexOf("v-")},f.isLateCompile=function(e){return t.hasAttr(e,"v-if")||t.hasAttr(e,"v-for")},f.checkCompleted=function(){0!==this.$unCompileNodes.length||this.$rootComplied||this.rootCompleted()},f.rootCompleted=function(){var e=this.$element;t.empty(e),this.$rootComplied=!0,e.appendChild(this.$fragment)},d}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(5),i(1)],n=function(t,e,i){function s(e){this.vm=e,t.call(this)}var n=s.prototype=Object.create(t.prototype);return n.parse=function(t,e,s){var n,a,r,c=this.vm,o=s.match(/(.*) in (.*)/),h=o[1],l=o[2],u=c.watcher,p=e.parentNode,d="OPTION"===e.tagName,f=this.getScope(c,t,l),v=this.getEvalFunc(t,l),g=v.call(f,f),m=l,y=i.getExpKey(l),b=-1,x={},w=[],C=[];return t&&(b=t.level,x=t.scopes,w=t.aliases.slice(0),C=t.accesses.slice(0),m=t.access+"*"+y),i.isArray(g)?(n=[e,g,m,h,w,C,x,++b],a=this.buildList.apply(this,n),e.parentNode.replaceChild(a,e),d&&this.froceUpdateOption(p,t),r={alias:h,aliases:w,access:m,accesses:C,scopes:x,level:b},void(t?u.watchAccess(m,function(t,i,s){this.update(p,e,i,s,r)},this):u.watchModel(m,function(t,i,s){this.update(p,e,i,s,r)},this))):void p.removeChild(e)},n.froceUpdateOption=function(t,i){var s=t._vmodel,n=this.getEvalFunc(i,s),a=this.getScope(this.vm,i,s),r=n.call(a,a);this.vm.updater.updateSelectChecked(t,r,e.hasAttr(t,"multiple"))},n.buildList=function(t,e,s,n,a,r,c,o){var h=this.vm,l=i.createFragment();return i.each(e,function(e,i){var u,p=t.cloneNode(!0),d=s+"*"+i;c[n]=e,a[o]=n,r[o]=d,u={alias:n,aliases:a,access:d,accesses:r,scope:e,scopes:c,level:o,index:i},t._vfor_directives>1&&h.blockCompile(t),this.signAlias(p,n),h.complieElement(p,!0,u),l.appendChild(p)},this),l},n.signAlias=function(t,e){i.def(t,"_vfor_alias",e)},n.update=function(t,e,i,s,n){switch(s){case"push":this.pushArray.apply(this,arguments);break;case"pop":this.popArray.apply(this,arguments);break;case"unshift":this.unshiftArray.apply(this,arguments);break;case"shift":this.shiftArray.apply(this,arguments);break;default:this.recompileArray.apply(this,arguments)}},n.pushArray=function(t,e,s,n,a){var r,c,o=i.createFragment(),h=e.cloneNode(!0),l=s.length-1,u=a.alias,p=a.level,d=a.access+"*"+l;a.scopes[u]=s[l],a.accesses[p]=d,c={alias:a.alias,aliases:a.aliases,access:d,accesses:a.accesses,scope:s[l],scopes:a.scopes,level:a.level,index:l},this.signAlias(h,u),this.vm.complieElement(h,!0,c),o.appendChild(h),r=this.getLastChild(t,u),r?t.insertBefore(o,r.nextSibling):t.appendChild(o)},n.popArray=function(t,e,i,s,n){var a=this.getLastChild(t,n.alias);a&&t.removeChild(a)},n.unshiftArray=function(t,e,s,n,a){var r,c=this.vm,o=i.createFragment(),h=e.cloneNode(!0);c.watcher.shiftSubs(a.access,n);var l,u=a.alias,p=a.level,d=a.access+"*0";a.scopes[u]=s[0],a.accesses[p]=d,l={alias:a.alias,aliases:a.aliases,access:d,accesses:a.accesses,scope:s[0],scopes:a.scopes,level:a.level,index:0},this.signAlias(h,u),c.complieElement(h,!0,l),o.appendChild(h),r=this.getFirstChild(t,u),t.insertBefore(o,r)},n.shiftArray=function(t,e,i,s,n){var a=this.getFirstChild(t,n.alias);a&&(t.removeChild(a),this.vm.watcher.shiftSubs(n.access,s))},n.getFirstChild=function(t,e){var i,s,n=null,a=t.childNodes;for(i=0;i<a.length;i++)if(s=a[i],s._vfor_alias===e){n=s;break}return n},n.getLastChild=function(t,e){var i,s,n=null,a=t.childNodes;for(i=a.length-1;i>-1;i--)if(s=a[i],s._vfor_alias===e){n=s;break}return n},n.recompileArray=function(t,e,i,s,n){var a,r,c,o=t.childNodes,h=n.alias,l=[e,i,n.access,h,n.aliases,n.accesses,n.scopes,n.level];this.vm.watcher.removeSubs(n.access),c=this.buildList.apply(this,l);for(var u=0;u<o.length;u++)r=o[u],r._vfor_alias===h&&(a?(u--,t.removeChild(r)):a=r);a?t.replaceChild(c,a):t.appendChild(c)},s}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(1)],n=function(t){function e(t){return g.test(t)&&!p.test(t)&&0!==t.indexOf("Math.")}function i(t){var e=m.length;return m[e]=t,'"'+e+'"'}function s(t,e){return m[e]}function n(t){var e=t.charAt(0),i=t.slice(1);return o.test(i)?t:(i=-1!==i.indexOf('"')?i.replace(u,s):i,e+"scope."+i)}function a(e,i){var s,n=i.replace(/(\(.*\))/g,"");return n===e.alias||d.test(n)?e.alias:(t.each(e.aliases,function(t){var e=new RegExp("\\b"+t+"\\b|\\b"+t+"\\.");return e.test(n)?(s=t,!1):void 0}),s)}function r(){}var c="Math.parseInt.parseFloat.Date.this.true.false.null.undefined.Infinity.NaN.isNaN.isFinite.decodeURI.decodeURIComponent.encodeURI.encodeURIComponent",o=new RegExp("^("+c.replace(/\./g,"\\b|")+"\\b)"),h="var.const.let.if.else.for.in.continue.switch.case.break.default.function.return.do.while.delete.try.catch.throw.finally.with.import.export.instanceof.yield.await",l=new RegExp("^("+h.replace(/\./g,"\\b|")+"\\b)"),u=/"(\d+)"/g,p=/^(true|false)$/,d=/^\$index|\W\$\bindex\b/,f=/[\{,]\s*[\w\$_]+\s*:|('[^']*'|"[^"]*")|typeof /g,v=/[^\w$\.]([A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\])*)/g,g=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,m=[],y=r.prototype;return y.bind=function(t,e,i){var s=this.vm,n=this.getDependents(t,i),a=this.getScope(s,t,i),r=this.getEvalFunc(t,i);s.watcher.watch(n,function(t,s){var n=this.updateScope(a,i,t,s);this.update(e,r.call(n,n))},this),this.update(e,r.call(a,a))},y.createGetter=function(e){try{return new Function("scope","return "+e+";")}catch(i){t.error("Invalid generated expression: "+e)}},y.getEvalFunc=function(t,e){var i,s,n=this.replaceScope(e);return t&&(i=a(t,e),s=new RegExp("scope."+i,"g"),n=n.replace(s,"scope")),this.createGetter(n)},y.replaceScope=function(a){var r=a;return e(r)?"scope."+r:l.test(r)?void t.warn("Avoid using unallow keyword in expression: "+r):(r=(" "+r).replace(f,i),r=r.replace(v,n),r=r.replace(u,s))},y.getScope=function(e,i,s){var n,r,c;return i&&(n=a(i,s))?(n===i.alias?(r=i.scope,d.test(s)&&(c=i.index,t.isObject(r)?r.$index=c:r={$index:c})):r=i.scopes[n],r):e.$data},y.updateScope=function(e,i,s,n){var a,r,c=e;return"object"!=typeof e&&(c=n),"$index"===i?c.$index=n:(a=t.getExpKey(i),r=a&&s!==i&&s.lastIndexOf(a)===s.length-a.length?a:s,c[r]=n),c},y.getDependents=function(e,s){var n=[],r=[],c=" "+s.replace(f,i);return c.replace(v,function(i){var c,o,h,l=i.substr(1);e?(c=a(e,s),-1===l.indexOf(c)&&"$index"!==l||(o=e.accesses[e.aliases.indexOf(c)])):c=t.getExpAlias(l),"$index"===l||l===c?h=o||e&&e.access:o&&"$event"!==l&&(h=o+"*"+t.getExpKey(l)),n.push(l),r.push(h)}),{dep:n,acc:r}},r}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){!(t.exports={empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},setAttr:function(t,e,i){t.setAttribute(e,i)},getAttr:function(t,e){return t.getAttribute(e)||""},hasAttr:function(t,e){return t.hasAttribute(e)},removeAttr:function(t,e){t.removeAttribute(e)},addClass:function(t,e){var i,s=t.classList;s?s.add(e):(i=" "+this.getAttr(t,"class")+" ",-1===i.indexOf(" "+e+" ")&&this.setAttr(t,"class",(i+e).trim()))},removeClass:function(t,e){var i,s,n=t.classList;if(n)n.remove(e);else{for(s=" "+e+" ",i=" "+this.getAttr(t,"class")+" ";-1!==i.indexOf(s);)i=i.replace(s," ");this.setAttr(t,"class",i.trim())}t.className||this.removeAttr(t,"class")},addEvent:function(t,e,i,s){t.addEventListener(e,i,s)},removeEvent:function(t,e,i,s){t.removeEventListener(e,i,s)}})},function(t,e,i){var s,n;s=[i(5),i(1)],n=function(t,e){function i(t){this.vm=t,this.$listeners={}}var s=i.prototype;return s.updateTextContent=function(t,e){t.textContent=(t._vm_text_prefix||"")+String(e)+(t._vm_text_suffix||"")},s.updateHtmlContent=function(i,s){var n=this.vm;s=String(s),n.isElementNode(i)?(t.empty(i),i.appendChild(e.stringToFragment(s))):n.isTextNode(i)&&i.parentNode.replaceChild(e.stringToFragment(s),i)},s.updateDisplay=function(e,i){var s=this.getSibling(e);this.setVisible(e),this.updateStyle(e,"display",i?e._visible_display:"none"),s&&(t.hasAttr(s,"v-else")||"v-else"===s._directive)&&(this.setVisible(s),this.updateStyle(s,"display",i?"none":s._visible_display))},s.setVisible=function(i){var s,n,a;i._visible_display||(s=e.removeSpace(t.getAttr(i,"style")),s&&-1!==s.indexOf("display")&&(n=s.split(";"),e.each(n,function(t){-1!==t.indexOf("display")&&(a=e.getKeyValue(t))})),"none"!==a&&(i._visible_display=a||""))},s.updateRenderContent=function(e,i){var s=this.getSibling(e);this.setRender(e),this.toggleRender.apply(this,arguments),s&&(t.hasAttr(s,"v-else")||"v-else"===s._directive)&&(this.setRender(s),this.toggleRender(s,!i))},s.setRender=function(e){e._render_content||(e._render_content=e.innerHTML),t.empty(e)},s.toggleRender=function(t,i){var s;i&&(s=e.stringToFragment(t._render_content),this.vm.complieElement(s,!0),t.appendChild(s))},s.getSibling=function(t){var e=t.nextSibling,i=this.vm.isElementNode;if(e&&i(e))return e;for(;e;)if(e=e.nextSibling,e&&i(e))return e;return null},s.updateAttribute=function(e,i,s){null===s?t.removeAttr.apply(this,arguments):"value"===i&&-1!==this.vm.$inputs.indexOf(e.tagName.toLowerCase())?e.value=s:t.setAttr.apply(this,arguments)},s.updateClassName=function(e,i,s,n){n?i===!0?t.addClass(e,n):i===!1&&t.removeClass(e,n):(i&&t.addClass(e,i),s&&t.removeClass(e,s))},s.updateStyle=function(t,e,i){t.style[e]=i},s.updateEvent=function(i,s,n,a,r,c){var o,h,l,u,p=this.$listeners,d=!1;-1!==s.indexOf(".")&&(o=s.split("."),s=o.shift(),h=o&&-1!==o.indexOf("self"),l=o&&-1!==o.indexOf("stop"),u=o&&-1!==o.indexOf("prevent"),d=o&&-1!==o.indexOf("capture")),a&&t.removeEvent(i,s,p[c],d),e.isFunc(n)?(p[c]=function(t){var s=[];h&&t.target!==i||(e.each(r,function(e){s.push("$event"===e?t:e)}),s.length||s.push(t),n.apply(this,s),l&&t.stopPropagation(),u&&t.preventDefault())},t.addEvent(i,s,p[c],d)):e.warn("The model: "+c+"'s value for using v-on must be a type of Function!")},s.updateTextValue=function(t,e){t.value!==e&&(t.value=e)},s.updateRadioChecked=function(t,i){t.checked=t.value===(e.isNumber(i)?String(i):i)},s.updateCheckboxChecked=function(t,i){return e.isArray(i)||e.isBoolean(i)?void(t.checked=e.isBoolean(i)?i:-1!==i.indexOf(t.value)):void e.warn("checkbox v-model value must be a type of Boolean or Array!")},s.updateSelectChecked=function(t,e,i){var s,n,a,r=t.options,c=r.length;for(s=0;c>s;s++)n=r[s],a=n.value,n.selected=i?-1!==e.indexOf(a):e===a},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(1),i(8)],n=function(t,e){function i(t){this.$model=t,this.$modelSubs={},this.$accessSubs={},this.$indexSubs={},this.observer=new e(t,["$els"],"change",this)}var s=i.prototype;return s.change=function(t,e,i){var s=-1!==t.indexOf("*"),n=s?this.$accessSubs[t]:this.$modelSubs[t];this.trigger(n,t,e,i)},s.trigger=function(e,i,s,n){t.each(e,function(t){t.cb.call(t.ct,i,s,n,t.arg)},this)},s.watch=function(e,i,s,n){var a=e.dep,r=e.acc;t.each(a,function(e,a){var c=r[a];if("$event"!==e)return"$index"===e?void this.watchIndex(c,i,s,n):c?void this.watchAccess(c,i,s,n):void this.watchModel(t.getExpAlias(e),i,s,n)},this)},s.watchModel=function(e,i,s,n){return t.hasOwn(this.$model,e)?-1!==e.indexOf("*")?void t.warn('Model key cannot contain the character "*"!'):void this.cacheSubs(this.$modelSubs,e,i,s,n):void t.warn('The field: "'+e+'" does not exist in model!')},s.watchAccess=function(t,e,i,s){this.cacheSubs(this.$accessSubs,t,e,i,s)},s.watchIndex=function(t,e,i,s){this.cacheSubs(this.$indexSubs,t,e,i,s)},s.cacheSubs=function(t,e,i,s,n){t[e]||(t[e]=[]),t[e].push({cb:i,ct:s,arg:n})},s.removeSubs=function(e){t.each(this.$accessSubs,function(t,i){return 0===i.indexOf(e)?null:void 0},this)},s.shiftSubs=function(t,e){var i=t+"*";this.shiftIndex(i,e),this.shiftAccess(i,e)},s.getRelate=function(e,i){var s={},n=[];return t.each(Object.keys(i),function(t){0===t.indexOf(e)&&(n.push(t),s[t]=i[t])},this),{caches:s,targets:n}},s.shiftIndex=function(t,e){var i=this.$indexSubs,s=this.getRelate(t,i);if(s.targets.length)switch(e){case"shift":this.shiftIndexForward(t,i,s);break;case"unshift":this.shiftIndexBackward(t,i,s)}},s.shiftIndexForward=function(e,i,s){var n=s.targets,a=s.caches;t.each(n,function(s){var n=+s.substr(e.length).charAt(0),r=s.substr(e.length+1),c=s,o=e+(n+1)+r;i[c]=a[o],t.each(i[c],function(t){t.cb.call(t.ct,c,n,t.arg)},this)},this)},s.shiftIndexBackward=function(e,i,s){var n=s.targets,a=s.caches;t.each(n.reverse(),function(s){var n,r=e+0,c=+s.substr(e.length).charAt(0),o=s.substr(e.length+1),h=s,l=e+(c+1)+o;i[l]=a[h],t.each(i[h],function(t){t.cb.call(t.ct,h,c+1,t.arg)},this),0===c&&(i[r]=n)},this)},s.shiftAccess=function(t,e){var i=this.$accessSubs,s=this.getRelate(t,i);if(s.targets.length)switch(e){case"shift":this.shiftAccessForward(t,i,s);break;case"unshift":this.shiftAccessBackward(t,i,s)}},s.shiftAccessForward=function(e,i,s){var n=s.targets,a=s.caches;t.each(n,function(t){var s=+t.substr(e.length).charAt(0),n=t.substr(e.length+1),r=t,c=e+(s+1)+n;i[r]=a[c]},this)},s.shiftAccessBackward=function(e,i,s){var n=s.targets,a=s.caches;t.each(n,function(t){var s,n=+t.substr(e.length).charAt(0),r=t.substr(e.length+1),c=e+0+r,o=t,h=e+(n+1)+r;i[h]=a[o],0===n&&(i[c]=s)},this)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(1)],n=function(t){function e(e,i,s,n,a){t.isString(s)&&(s=n[s]),this.$ignores=i,this.$callback=s,this.$context=n,this.$args=a,this.$observers=[e],this.$valuesMap={0:t.copy(e)},this.$arrayAction=921,this.$aviodArrayAction=["shift","unshift","splice"],this.$fixArrayMethods="push|pop|shift|unshift|splice|sort|reverse".split("|"),this.$separator="*",this.observe(e)}var i=e.prototype;return i.observe=function(e,i){return t.isArray(e)&&this.rewriteArrayMethods(e,i),t.each(e,function(t,s){var n=i&&i.slice(0);n?n.push(s):n=[s],this.isIgnore(n)||this.setCache(e,t,s).bindWatching(e,n)},this),this},i.isIgnore=function(e){var i,s=e.join(this.$separator);return t.each(this.$ignores,function(t){return 0===t.indexOf(s)?(i=!0,!1):void 0},this),i},i.getCache=function(t,e){var i=this.$observers.indexOf(t),s=-1===i?null:this.$valuesMap[i];return s?s[e]:s},i.setCache=function(e,i,s){var n=this.$observers,a=this.$valuesMap,r=n.length,c=n.indexOf(e);return-1===c?(n.push(e),a[r]=t.copy(e)):a[c][s]=i,this},i.bindWatching=function(e,i){var s=i[i.length-1];Object.defineProperty(e,s,{get:function(){return this.getCache(e,s)}.bind(this),set:function(){var n=arguments[0],a=this.getCache(e,s);n!==a&&((t.isObject(n)||t.isArray(n))&&this.observe(n,i),this.setCache(e,n,s),-1===this.$aviodArrayAction.indexOf(this.$arrayAction)&&this.triggerChange(i.join(this.$separator),n,a))}.bind(this)});var n=e[s];(t.isArray(n)||t.isObject(n))&&this.observe(n,i)},i.rewriteArrayMethods=function(e,i){var s=t.AP,n=Object.create(s),a=i&&i.join(this.$separator);t.each(this.$fixArrayMethods,function(e){var r=this,c=s[e];t.def(n,e,function(){for(var t,s=arguments.length,n=new Array(s);s--;)n[s]=arguments[s];return r.$arrayAction=e,t=c.apply(this,n),r.$arrayAction=921,r.observe(this,i),r.triggerChange(a,this,e),t},!0,!1,!0)},this),e.__proto__=n},i.triggerChange=function(t,e,i){this.$callback.apply(this.$context,[t,e,i,this.$args])},e}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(t,i,s,n){var a=this.getDependents(t,s),r=e.removeSpace(n);-1!==r.indexOf(":")?this.parseSingle(i,s,r,t,a):this.parseMulti(i,s,t,a)},s.parseSingle=function(t,i,s,n,a){var r=this.vm,c=this.getScope(r,n,i),o=e.getKeyValue(s),h=e.stringToParams(i),l=h[0],u=this.evalParams(n,h[1]);this.bindEvent(t,n,c,o,l,u,a),r.watcher.watch(a,function(e,i,s){this.update(t,o,i,s,u,e)},this)},s.parseMulti=function(t,i,s,n){var a=this.vm,r={},c=[],o=[],h=e.convertJson(i);e.each(h,function(i,h){var l=e.stringToParams(i),u=l[0]||i,p=this.evalParams(s,l[1]),d=n.acc[n.dep.indexOf(u)],f=this.getScope(a,s,u);c.push(u),o.push(d),r[d]={type:h,params:p},this.bindEvent(t,s,f,h,u,p,n)},this),a.watcher.watch({dep:c,acc:o},function(e,i,s){var n=r[e];this.update(t,n.type,i,s,n.params,e)},this)},s.bindEvent=function(t,e,i,s,n,a,r){var c=this.getEvalFunc(e,n),o=c.call(i,i),h=r.acc[r.dep.indexOf(n)]||n;this.update(t,s,o,null,a,h)},s.evalParams=function(t,i){var s=[],n=this.vm;return e.each(i,function(i){var a,r,c,o=i;e.isString(o)&&"$event"!==o&&(a=this.replaceScope(o),-1!==a.indexOf("scope.")&&(c=this.getScope(n,t,o),r=this.createGetter(a),o=r.call(c,c))),s.push(o)},this),s},s.update=function(){var t=this.vm.updater;t.updateEvent.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(t,i,s){var n,a,r;if(t){if(a=e.getExpAlias(s),a!==t.alias)return void e.warn("when v-el use in v-for must be defined inside current loop body!");r=t.scope,e.isObject(r)&&(n=e.getExpKey(s),r[n]=i)}else this.vm.$data.$els[s]=i},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(){this.bind.apply(this,arguments)},s.update=function(){var t=this.vm.updater;t.updateRenderContent.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(){this.bind.apply(this,arguments)},s.update=function(){var t=this.vm.updater;t.updateTextContent.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(){this.bind.apply(this,arguments)},s.update=function(){var t=this.vm.updater;t.updateHtmlContent.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=i.prototype=Object.create(t.prototype);return s.parse=function(){this.bind.apply(this,arguments)},s.update=function(){var t=this.vm.updater;t.updateDisplay.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(1)],n=function(t,e){function i(e){this.vm=e,t.call(this)}var s=/^\{.*\}$/,n=i.prototype=Object.create(t.prototype);return n.parse=function(t,i,s,n){var a,r,c=this.getDependents(t,s),o=e.removeSpace(n);if(-1!==o.indexOf(":"))switch(a=e.getKeyValue(o)){case"class":this.parseClass(i,t,c,s);break;case"style":this.parseStyle(i,t,c,s);break;default:this.parseAttr(i,t,a,c,s)}else r=e.convertJson(s),e.each(r,function(e,s){var n=e,a=this.getDependents(t,n);switch(s){case"class":this.parseClass(i,t,a,n);break;case"style":this.parseStyle(i,t,a,n);break;default:this.parseAttr(i,t,s,a,n)}},this)},n.parseClass=function(t,i,n,a){var r,c,o,h,l=this.vm,u=l.watcher,p=a.trim(),d=s.test(p),f={},v=[],g=[];if(d)r=e.convertJson(p),e.each(r,function(e,s){var a,h=r[s],u=n.acc[n.dep.indexOf(h)];c=this.getScope(l,i,e),o=this.getEvalFunc(i,e),a=o.call(c,c),v.push(h),g.push(u),f[u||h]=s,this.updateClass(t,a,!1,s),c=o=null},this);else if(c=this.getScope(l,i,p),o=this.getEvalFunc(i,p),h=o.call(c,c),e.isString(h))this.updateClass(t,h);else if(e.isArray(h))e.each(h,function(e){this.updateClass(t,e)},this);else if(e.isObject(h))return this.parseClassObject(t,h,n,p),void u.watch(n,function(i,s,a){e.each(a,function(e,i){this.updateClass(t,!1,!1,i)},this),this.parseClassObject(t,s,n,p)},this);d?this.watchClassObject(t,{dep:v,acc:g},f):u.watch(n,function(e,i,s){this.updateClass(t,i,s)},this)},n.parseClassObject=function(t,i,s,n){var a={},r=[],c=[];e.each(i,function(e,i){var o=n,h=s.acc[s.dep.indexOf(o)],l=h?h+"*"+i:o+"*"+i;r.push(o),c.push(l),a[l]=i,this.updateClass(t,e,!1,i)},this),this.watchClassObject(t,{dep:r,acc:c},a)},n.watchClassObject=function(t,e,i){this.vm.watcher.watch(e,function(e,s,n){this.updateClass(t,s,n,i[e])},this)},n.updateClass=function(){var t=this.vm.updater;t.updateClassName.apply(t,arguments)},n.parseStyle=function(t,i,n,a){var r,c,o,h,l=this.vm,u=l.watcher,p=a.trim(),d=s.test(p),f={};d?(r=e.convertJson(p),e.each(r,function(e,s){var a,r=e,h=n.acc[n.dep.indexOf(r)];c=this.getScope(l,i,r),o=this.getEvalFunc(i,r),a=o.call(c,c),f[h||r]=s,this.updateStyle(t,s,a),c=o=null},this),u.watch(n,function(e,i,s){this.updateStyle(t,f[e],i)},this)):(c=this.getScope(l,i,p),o=this.getEvalFunc(i,p),h=o.call(c,c),this.parseStyleObject(t,h,n),u.watch(n,function(i,s,a){e.each(a,function(e,i){this.updateStyle(t,i,null)},this),this.parseStyleObject(t,s,n)},this))},n.parseStyleObject=function(t,i,s){var n={},a=[],r=[];e.each(i,function(e,i){var c=s.dep[0],o=s.acc[0]||c,h=o+"*"+i;a.push(c),r.push(h),n[h]=i,this.updateStyle(t,i,e)},this),this.vm.watcher.watch({dep:a,acc:r},function(e,i,s){this.updateStyle(t,n[e],i)},this)},n.updateStyle=function(){var t=this.vm.updater;t.updateStyle.apply(t,arguments)},n.parseAttr=function(t,e,i,s,n){var a=this.vm,r=this.getScope(a,e,n),c=this.getEvalFunc(e,n),o=c.call(r,r);this.updateAttr(t,i,o),a.watcher.watch(s,function(e,s,n){this.updateAttr(t,i,s)},this)},n.updateAttr=function(){var t=this.vm.updater;t.updateAttribute.apply(t,arguments)},i}.apply(e,s),!(void 0!==n&&(t.exports=n))},function(t,e,i){var s,n;s=[i(4),i(5),i(1)],n=function(t,e,i){function s(e){this.vm=e,t.call(this)}var n=s.prototype=Object.create(t.prototype);return n.parse=function(t,s,n){var a=this.vm,r=a.$inputs,c=s.tagName.toLowerCase(),o="input"===c?e.getAttr(s,"type"):c;if(-1===r.indexOf(c))return void i.warn("v-model only for using in "+r.join(", "));i.def(s,"_vmodel",n);var h=this.getDependents(t,n),l=this.getScope(a,t,n),u=this.getEvalFunc(t,n),p=u.call(l,l),d=i.getExpKey(n)||n,f=[s,p,h,l,d];switch(o){case"text":case"textarea":this.parseText.apply(this,f);break;case"radio":this.parseRadio.apply(this,f);break;case"checkbox":this.parseCheckbox.apply(this,f);break;case"select":this.parseSelect.apply(this,f)}},n.parseText=function(t,e,i,s,n){var a=this.vm,r=a.updater;r.updateTextValue(t,e),a.watcher.watch(i,function(e,i){r.updateTextValue(t,i)},this),this.bindTextEvent(t,s,n)},n.bindTextEvent=function(t,i,s){var n;e.addEvent(t,"compositionstart",function(){n=!0}),e.addEvent(t,"compositionend",function(){n=!1}),e.addEvent(t,"input",function(){n||(i[s]=this.value)}),e.addEvent(t,"change",function(){i[s]=this.value})},n.parseRadio=function(t,e,i,s,n){var a=this.vm,r=a.updater;r.updateRadioChecked(t,e),a.watcher.watch(i,function(e,i){r.updateRadioChecked(t,i)},this),this.bindRadioEvent(t,s,n)},n.bindRadioEvent=function(t,i,s){e.addEvent(t,"change",function(){i[s]=this.value})},n.parseCheckbox=function(t,e,i,s,n){var a=this.vm,r=a.updater;r.updateCheckboxChecked(t,e),a.watcher.watch(i,function(e,i){r.updateCheckboxChecked(t,i)},this),this.bindCheckboxEvent(t,s,n,e)},n.bindCheckboxEvent=function(t,s,n,a){e.addEvent(t,"change",function(){var t,e=this.checked,r=this.value;i.isBoolean(a)?s[n]=e:i.isArray(a)&&(t=a.indexOf(r),e?-1===t&&a.push(r):-1!==t&&a.splice(t,1))})},n.parseSelect=function(t,s,n,a,r){var c,o,h,l=this.vm.updater,u=t.options,p=e.hasAttr(t,"multiple"),d=u.length,f=[];if(i.isString(s)){if(p)return void i.warn("<select> cannot be multiple when the model set '"+r+"' as not Array!");h=Boolean(s)}else{if(!i.isArray(s))return void i.warn("the model "+r+" use in <select> must be a type of String or Array!");if(!p)return void i.warn("the model '"+r+"' cannot set as Array when <select> has no multiple propperty!");h=s.length>0}if(h)l.updateSelectChecked(t,s,p);else{for(o=0;d>o;o++)c=u[o],c.selected&&f.push(c.value);a[r]=p?f:f[0]}this.vm.watcher.watch(n,function(e,i){l.updateSelectChecked(t,i,p)}),this.bindSelectEvent(t,a,r,p)},n.bindSelectEvent=function(t,i,s,n){var a=this;e.addEvent(t,"change",function(){var t=a.getSelected(this);i[s]=n?t:t[0]})},n.getSelected=function(t){var e,i,s=t.options,n=s.length,a=[];for(e=0;n>e;e++)i=s[e],i.selected&&a.push(i.value);return a},s}.apply(e,s),!(void 0!==n&&(t.exports=n))}])});